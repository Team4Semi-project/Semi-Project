<div th:fragment="recipeList" class="recipeList">
  <div class="recipe-container cozy-view" id="cozy">
    <div class="recipe-container cozy-view" id="cozy">
      <!-- 게시글 없을 때 -->
      <div th:if="${#lists.isEmpty(recipeBoardList)}" class="no-recipes">
        <p>등록된 게시글이 없습니다.</p>
      </div>

      <!-- 게시글 목록 -->
      <div th:unless="${#lists.isEmpty(recipeBoardList)}" class="recipe-grid">


        <!-- 검색 시 -->


        <!-- 검색 아닐 시 -->
        <div th:if="${key == null}" th:each="board : ${recipeBoardList}" class="recipe-item"
          th:data-url="@{/board/{boardCode}/userProfile/{boardNo}(boardCode=${board.boardCode}, boardNo=${board.boardNo}, cp=${recipePagination.currentPage})} + '&sort=' +  ${sort}">

          <!-- 레시피 게시판 썸네일 -->
          <div class="recipe-image">
            <img onerror="this.onerror=null; this.src='/images/lemona-logo.png';"
              th:src="${#strings.isEmpty(board.thumbnailImgRename) ? '/images/lemona-logo.png' : board.thumbnailImgPath + board.thumbnailImgRename}"
              alt="레시피 이미지" />
          </div>

          <!-- 글 제목 클릭 시 이동 -->
          <div class="recipe-info">
            <h3 class="recipe-title">
              <div th:utext="${board.boardTitle}">레몬 팬케이크</div>
              <span class="comment-count" th:text="'[' + ${board.commentCount} + ']'">[0]</span>
            </h3>

            <!-- 레시피 게시판 해시태그 -->
            <div class="recipe-tags">
              <span class="tag" th:each="tag : ${board.hashTagList}" th:utext="'#' +${tag}">#레몬</span>
            </div>

            <!-- 상세페이지 이동 X -->
            <div class="non-href">
              <div class="recipe-meta">
                <!-- 사용자 정보 -->
                <div class="author-info">
                  <img th:src="${#strings.isEmpty(board.profileImg) ? '/images/user.png' : board.profileImg}"
                    alt="프로필 이미지" class="author-image" />
                  <span class="author-name" th:utext="${board.memberNickname}">장미애 님</span>
                </div>
                <!-- 작성일 -->
                <span class="recipe-date" th:text="${board.boardCreateDate}">2025-05-09</span>
              </div>

              <!-- 좋아요/조회수 -->
              <div class="recipe-stats">
                <!-- 좋아요 버튼 -->
                <button type="button" class="likes" th:data-login-member-no="${session.loginMember?.memberNo}"
                  th:data-board-code="${board.boardCode}" th:data-board-no="${board.boardNo}"
                  th:data-like-check="${board.likeCheck}"
                  th:classappend="${board.likeCheck == 1} ? likeChecked : likeUnChecked">
                  <i class="fa-lemon" th:classappend="${board.likeCheck == 1} ? fa-solid : fa-regular"></i>
                  <span th:text="${board.likeCount}">28</span>
                </button>
                <!-- 조회수 -->
                <div class="views">
                  <i class="material-symbols-outlined align-middle">visibility</i>
                  <span th:text="${board.readCount}">36</span>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>

  <div class="recipe-container agenda-view" id="agenda" style="display: none">
    <!-- 게시글 없을 때 -->
    <div th:if="${#lists.isEmpty(recipeBoardList)}" class="no-recipes">
      <p>등록된 게시글이 없습니다.</p>
    </div>

    <!-- 게시글 목록 -->
    <div th:unless="${#lists.isEmpty(recipeBoardList)}" class="recipe-list">
      <div th:each="board : ${recipeBoardList}" class="recipe-item">
        <div class="recipe-image">
          <!--  <img th:src="${board.thumbnail}" alt="레시피 이미지"> -->
          <!-- 레시피 게시판 썸네일 -->
          <a th:if="${key != null}"
            th:href="@{/board/{boardCode}/{categoryNo}/{boardNo}(boardCode=${board.boardCode}, categoryNo=${categoryNo}, boardNo=${board.boardNo}, cp=${recipePagination.currentPage}, key=${param.key}, queryb=${param.queryb})} + '&sort=' +  ${sort} ">
            <!-- 레시피 게시판 썸네일 -->
            <img onerror="this.onerror=null; this.src='/images/lemona-logo.png';"
              th:src="${#strings.isEmpty(board.thumbnailImgRename) ? '/images/lemona-logo.png' : board.thumbnailImgPath + board.thumbnailImgRename}"
              alt="레시피 이미지" />
          </a>
          <a th:if="${key == null}"
            th:href="@{/board/{boardCode}/{categoryNo}/{boardNo}(boardCode=${board.boardCode}, categoryNo=${categoryNo}, boardNo=${board.boardNo}, cp=${recipePagination.currentPage})} + '&sort=' +  ${sort} ">
            <!-- 레시피 게시판 썸네일 -->
            <img onerror="this.onerror=null; this.src='/images/lemona-logo.png';"
              th:src="${#strings.isEmpty(board.thumbnailImgRename) ? '/images/lemona-logo.png' : board.thumbnailImgPath + board.thumbnailImgRename}"
              alt="레시피 이미지" />
          </a>
        </div>

        <!-- 글 제목 클릭 시 이동-->
        <div class="recipe-details">
          <h3 class="recipe-title">
            <a th:href="@{/board/{boardCode}/{categoryNo}/{boardNo}(boardCode=${board.boardCode}, categoryNo=${categoryNo}, boardNo=${board.boardNo}, cp=${recipePagination.currentPage})} + '&sort=' +  ${sort}"
              th:utext="${board.boardTitle}">레몬 팬케이크
            </a>
            <span class="comment-count" th:text="'[' + ${board.commentCount} + ']'">[0]</span>
          </h3>
          <div class="recipe-meta">
            <span class="recipe-date" th:text="${board.boardCreateDate}">2025-05-09</span>
            <span class="recipe-author" th:utext="${board.memberNickname}">김아가 님</span>
          </div>
          <!-- 레시피 게시판 해시태그 -->
          <div class="recipe-tags">
            <span class="tag" th:each="tag : ${board.hashTagList}" th:utext="'#' +${tag}">#레몬</span>
          </div>
          <div class="recipe-stats">
            <button type="button" class="likes" th:data-login-member-no="${session.loginMember?.memberNo}"
              th:data-board-code="${board.boardCode}" th:data-board-no="${board.boardNo}"
              th:data-like-check="${board.likeCheck}"
              th:classappend="${board.likeCheck == 1} ? likeChecked : likeUnChecked">
              <i class="fa-lemon" th:classappend="${board.likeCheck == 1} ? fa-solid : fa-regular"></i>
              <span th:text="${board.likeCount}">28</span>
            </button>
            <div class="views">
              <i class="material-symbols-outlined align-middle">visibility</i>
              <span th:text="${board.readCount}">36</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 페이지네이션 : 게시글이 있을 때만 페이지네이션이 보이게 할 예정 -->
  <div class="pagination-area">
    <!-- 일반 목록 조회 (검색 X )-->
    <ul class="pagination" th:unless="${param.key}" th:object="${recipePagination}">
      <!-- 첫 페이지로 이동 -->
      <li>
        <a
          th:href="@{/mypage/userProfile(cp=1)} + '&memberNickname=' +  ${member.memberNickname}">&lt;&lt;</a>
      </li>
      <!-- << : /board/1?cp=1 -->

      <!-- 이전 목록 마지막 번호로 이동 -->
      <li>
        <a
          th:href="@{/mypage/userProfile(cp=*{prevPage})} + '&memberNickname=' +  ${member.memberNickname}">&lt;</a>
      </li>
      <!-- < : /board/1?cp=10 -->

      <!-- 특정 페이지로 이동 -->
      <th:block th:each="i : *{#numbers.sequence(startPage, endPage)}">
        <!-- 현재 보고있는 페이지 -->
        <li th:if="${i} == *{currentPage}">
          <a class="current" th:text="${i}">현재페이지</a>
        </li>

        <!-- 보고있지 않은 페이지 -->
        <li th:unless="${i} == *{currentPage} or ${i} == 0">
          <a th:href="@{/mypage/userProfile(cp=${i})} + '&memberNickname=' +  ${member.memberNickname}"
            th:text="${i}">이동할 페이지</a>
        </li>
      </th:block>

      <!-- 다음 목록 시작 번호로 이동 -->
      <li>
        <a
          th:href="@{/mypage/userProfile(cp=*{nextPage})} + '&memberNickname=' +  ${member.memberNickname}">&gt;</a>
      </li>

      <!-- 끝 페이지로 이동 -->
      <li>
        <a
          th:href="@{/mypage/userProfile(cp=*{maxPage})} + '&memberNickname=' +  ${member.memberNickname}">&gt;&gt;</a>
      </li>
    </ul>
  </div>

</div>